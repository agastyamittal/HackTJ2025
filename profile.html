<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        body {
            background: linear-gradient(180deg, #ffffff 0%, #e6f0ff 35%, #cce0ff 70%, #b3d1ff 100%);
            min-height: 100vh;
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/png" href="https://i.imgur.com/4ZDrJqt.png">
    <script src="https://kit.fontawesome.com/your-code.js" crossorigin="anonymous"></script>
</head>
<body class="bg-gray-100">
    <nav class="bg-gray-800 shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <div class="relative flex h-16 items-center justify-between">
                <!-- Left side: Logo and Brand -->
                <div class="flex items-center">
                    <img class="h-8 w-auto hover:opacity-75 transition-opacity" src="https://i.imgur.com/4ZDrJqt.png" alt="SkillSwap">
                    <h1 class="text-2xl font-bold text-white ml-3">SkillSwap</h1>
                </div>
                
                <!-- Back to Dashboard -->
                <div class="flex items-center">
                    <a href="homepage_afs.html" class="text-white hover:text-gray-300 flex items-center gap-2 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                        </svg>
                        Back to Dashboard
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-4xl mx-auto px-4 py-8">
        <div class="bg-white rounded-xl shadow-lg overflow-hidden">
            <!-- Profile Header -->
            <div class="bg-gradient-to-r from-blue-500 to-purple-600 p-6">
                <div class="flex flex-col sm:flex-row items-center">
                    <div class="relative">
                        <img class="h-32 w-32 rounded-full border-4 border-white shadow-lg" src="https://i.imgur.com/VAn4QsU.jpeg" alt="User Avatar">
                    </div>
                    <div class="mt-4 sm:mt-0 sm:ml-6 text-center sm:text-left">
                        <h2 class="text-3xl font-bold text-white" id="profile_dynamic">Kedar Kalluri</h2>
                        <p class="text-xl text-white/90" id="job_dyanmic"></p>
                    </div>
                    <!-- Add Connect Button -->
                    <div class="ml-auto" id="connect-button-container"></div>
                </div>
            </div>

            <!-- Profile Content -->
            <div class="p-6 space-y-8">
                <!-- About Section -->
                <div class="bg-gray-50 rounded-lg p-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                        About Me
                    </h3>
                    <p class="text-lg text-gray-600" id="bio_dynamic"></p>
                </div>

                <!-- Skills Section -->
                <div class="bg-gray-50 rounded-lg p-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                        </svg>
                        Skills
                    </h3>
                    <ul class="grid grid-cols-2 sm:grid-cols-3 gap-3 text-lg text-gray-600" id="skills_dynamic">
                    </ul>
                </div>

                <!-- Interests Section -->
                <div class="bg-gray-50 rounded-lg p-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                        </svg>
                        Interests
                    </h3>
                    <ul class="grid grid-cols-2 sm:grid-cols-3 gap-3 text-lg text-gray-600" id="interests_dynamic">
                    </ul>
                </div>

                <!-- Contact Section -->
                <div class="bg-gray-50 rounded-lg p-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                        </svg>
                        Contact
                    </h3>
                    <div class="space-y-2">
                        <p class="text-lg text-gray-600 flex items-center gap-2" id="contact_email_dynamic">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
                                <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
                            </svg>
                            Email: john.doe@example.com
                        </p>
                        <p class="text-lg text-gray-600 flex items-center gap-2" id="conatct_phone_dynamic">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z" />
                            </svg>
                            Phone: (123) 456-7890
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
        <script>
    document.addEventListener("DOMContentLoaded", function () {
    // Get DOM elements
    const profileButton = document.getElementById('user-menu-button');
    const dropdownMenu = document.getElementById('profile-dropdown');
    const profileNameElement = document.getElementById('profile_dynamic');
    const bioElement = document.getElementById('bio_dynamic');
    const professionElement = document.getElementById('job_dyanmic');
    const skillsElement = document.getElementById('skills_dynamic');
    const interestsElement = document.getElementById('interests_dynamic');
    const phoneElement = document.getElementById('conatct_phone_dynamic');
    const emailElement = document.getElementById('contact_email_dynamic');
    const profilePictures = document.querySelectorAll('img[src*="VAn4QsU.jpeg"]');
    
    try {
        // Check if we're viewing someone else's profile
        const viewUsername = localStorage.getItem('viewProfile');
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        const users = JSON.parse(localStorage.getItem('users'));
        
        // Determine which user's data to display
        const userData = viewUsername ? users[viewUsername] : users[currentUser.username];
        if (viewUsername && userData) {
    const currentConnections = users[currentUser.username].connections || [];
    const pendingRequests = users[viewUsername].connectionRequests || [];
    const connectButtonContainer = document.getElementById('connect-button-container');

    // Only show connect button if not already connected and not own profile
    if (!currentConnections.includes(viewUsername) && viewUsername !== currentUser.username) {
        const isRequestPending = pendingRequests.some(req => req.from === currentUser.username);
        
        const connectButton = document.createElement('button');
        connectButton.className = 'bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg shadow transition-colors';
        connectButton.textContent = isRequestPending ? 'Request Sent' : 'Connect';
        
        if (isRequestPending) {
            connectButton.disabled = true;
            connectButton.className = 'bg-gray-400 text-white px-6 py-2 rounded-lg shadow cursor-not-allowed';
        } else {
            connectButton.onclick = (event) => sendConnectionRequest(event, viewUsername);
        }
        
        connectButtonContainer.appendChild(connectButton);
    }
}
        if (userData) {
            console.log('User data found:', userData); // Debug log
            
            // Update name
            if (userData.firstName && userData.lastName) {
                profileNameElement.textContent = `${userData.firstName} ${userData.lastName}`;
            }

            // Update bio
            if (userData.bio) {
                bioElement.textContent = userData.bio;
            }

            // Update profession
            if (userData.profession) {
                professionElement.textContent = userData.profession;
            }

            // Update skills
            if (userData.skills && userData.skills.length > 0) {
                skillsElement.innerHTML = ''; // Clear existing skills
                userData.skills.forEach(skill => {
                    const li = document.createElement('li');
                    li.textContent = skill;
                    skillsElement.appendChild(li);
                });
            }

            // Update interests
            if (userData.interests && userData.interests.length > 0) {
                interestsElement.innerHTML = ''; // Clear existing interests
                userData.interests.forEach(interest => {
                    const li = document.createElement('li');
                    li.textContent = interest;
                    interestsElement.appendChild(li);
                });
            }

            // Update contact information
            if (userData.phone) {
                phoneElement.textContent = `Phone: ${userData.phone}`;
            }
            if (userData.email) {
                emailElement.textContent = `Email: ${userData.email}`;
            }

            // Update profile picture
            if (userData.profilePicture) {
                document.querySelector('img[alt="User Avatar"]').src = userData.profilePicture;
            }

            console.log('Profile updated successfully');
            
            // Clear the viewProfile from localStorage after loading
            if (viewUsername) {
                localStorage.removeItem('viewProfile');
            }
        }

        // Keep the dropdown menu functionality for user's own profile
        if (!viewUsername && profileButton && dropdownMenu) {
            profileButton.addEventListener('click', (event) => {
                event.stopPropagation();
                dropdownMenu.classList.toggle('hidden');
            });                
            
            document.addEventListener('click', (event) => {
                if (!profileButton.contains(event.target) && !dropdownMenu.contains(event.target)) {
                    dropdownMenu.classList.add('hidden');
                }
            });
        }
        
    } catch (error) {
        console.error('Error updating profile:', error);
    }
});
function sendConnectionRequest(event, targetUsername) {
    event.preventDefault();
    
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    const users = JSON.parse(localStorage.getItem('users'));
    
    if (!users[targetUsername].connectionRequests) {
        users[targetUsername].connectionRequests = [];
    }
    
    // Check if request already exists
    if (!users[targetUsername].connectionRequests.some(req => req.from === currentUser.username)) {
        users[targetUsername].connectionRequests.push({
            from: currentUser.username,
            status: 'pending'
        });
        
        // Save to localStorage
        localStorage.setItem('users', JSON.stringify(users));
        
        // Update button appearance
        const button = event.target;
        button.textContent = 'Request Sent';
        button.disabled = true;
        button.className = 'bg-gray-400 text-white px-6 py-2 rounded-lg shadow cursor-not-allowed';
    }
}
</script>
</body>
<footer class="bg-gray-800 mt-8">
    <div class="max-w-7xl mx-auto px-4 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center">
                <img class="h-8 w-auto" src="https://i.imgur.com/4ZDrJqt.png" alt="SkillSwap">
                <span class="text-white ml-3">© 2025 SkillSwap</span>
            </div>
                <a href="about.html" class="text-gray-300 hover:text-white transition-colors">About</a>
                <a href="#" class="text-gray-300 hover:text-white transition-colors">Contact</a>         
               </div>
        </div>
    </div>
  </footer>
</html>